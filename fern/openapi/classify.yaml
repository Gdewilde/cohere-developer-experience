post:
  parameters:
    - $ref: './types/RequestSource.yaml'
  x-fern-audiences: [public]
  summary: Classify
  operationId: classify
  x-readme:
    samples-languages:
      - python
      - java
      - curl
      - node
      - go
    code-samples:
      - language: go
        name: Cohere Go SDK
        install: go get github.com/cohere-ai/cohere-go/v2
        code:
          $ref: './snippets/go/classify-post/main.go'
      - language: node
        name: Cohere TypeScript SDK
        install: npm i cohere-ai
        code:
          $ref: ./snippets/node/classify-post.ts
      - language: python
        name: Sync
        install: python -m pip install cohere --upgrade
        code:
          $ref: ./snippets/python/classify-post.py
      - language: python
        name: Async
        install: python -m pip install cohere --upgrade
        code:
          $ref: ./snippets/python-async/classify-post.py
      - language: java
        name: Cohere java SDK
        install: implementation 'com.cohere:cohere-java:1.0.4'
        code:
          $ref: ./snippets/java/app/src/main/java/ClassifyPost.java
      - language: curl
        name: cURL
        code:
          $ref: ./snippets/curl/classify-post.sh
  responses:
    '400':
      $ref: "./errors/BadRequest.yaml"
    '401':
      $ref: "./errors/Unauthorized.yaml"
    '403':
      $ref: "./errors/Forbidden.yaml"
    '404':
      $ref: "./errors/NotFound.yaml"
    '422':
      $ref: "./errors/UnprocessableEntity.yaml"
    '429':
      $ref: './errors/RateLimit.yaml'
    '498':
      $ref: "./errors/InvalidToken.yaml"
    '499':
      $ref: "./errors/RequestCancelled.yaml"
    '500':
      $ref: "./errors/InternalServerError.yaml"
    '501':
      $ref: "./errors/NotImplemented.yaml"
    '503':
      $ref: "./errors/ServiceUnavailable.yaml"
    '504':
      $ref: "./errors/GatewayTimeout.yaml"
    '200':
      description: OK
      content:
        application/json:
          schema:
            type: object
            x-fern-audiences: ['public']
            x-examples:
              Example:
                id: ca245541-8841-456e-b306-293370789a30
                classifications:
                  - id: c50ab0d9-95d8-44de-ba90-9647a1718744
                    input: Confirm your email address
                    prediction: Not spam
                    predictions:
                      - Not spam
                    confidence: 0.7581943
                    confidences:
                      - 0.7581943
                    labels:
                      Not spam:
                        confidence: 0.7581943
                      Spam:
                        confidence: 0.24180566
                    classification_type: single-label
                  - id: 8a841de2-027f-49d4-8c91-e88fa1865b89
                    input: hey i need u to send some $
                    prediction: Spam
                    predictions:
                      - Spam
                    confidence: 0.9965721
                    confidences:
                      - 0.9965721
                    labels:
                      Not spam:
                        confidence: 0.0034279241
                      Spam:
                        confidence: 0.9965721
                    classification_type: single-label
            properties:
              id:
                type: string
                x-fern-audiences: ['public']
                readOnly: true
              classifications:
                type: array
                x-fern-audiences: ['public']
                items:
                  type: object
                  x-fern-audiences: ['public']
                  properties:
                    id:
                      type: string
                      x-fern-audiences: ['public']
                      readOnly: true
                    input:
                      type: string
                      x-fern-audiences: ['public']
                      description: The input text that was classified
                      readOnly: true
                    prediction:
                      type: string
                      x-fern-audiences: ['public']
                      description: The predicted label for the associated query (only filled for
                        single-label models)
                      readOnly: true
                      deprecated: true # prediction will be removed soon to remove redundancy, use predictions instead which works both for single and multi-label models
                    predictions:
                      type: array
                      x-fern-audiences: ['public']
                      items:
                        type: string
                        x-fern-audiences: ['public']
                      description: An array containing the predicted labels for the associated query
                        (only filled for single-label classification)
                      readOnly: true
                    confidence:
                      type: number
                      x-fern-audiences: ['public']
                      format: float
                      description: The confidence score for the top predicted class (only filled for
                        single-label classification)
                      readOnly: true
                      deprecated: true # confidence will be removed soon to remove redundancy, use confidences instead which works both for single and multi-label models
                    confidences:
                      type: array
                      x-fern-audiences: ['public']
                      items:
                        type: number
                        x-fern-audiences: ['public']
                        format: float
                      description:
                        An array containing the confidence scores of all the predictions in
                        the same order
                      readOnly: true
                    labels:
                      type: object
                      x-fern-audiences: ['public']
                      additionalProperties:
                        type: object
                        x-fern-audiences: ['public']
                        properties:
                          confidence:
                            type: number
                            x-fern-audiences: ['public']
                            format: float
                            readOnly: true
                        readOnly: true
                      description: A map containing each label and its confidence score according to
                        the classifier. All the confidence scores add up to 1
                        for single-label classification. For multi-label
                        classification the label confidences are independent of
                        each other, so they don't have to sum up to 1.
                      readOnly: true
                    classification_type:
                      type: string
                      x-fern-audiences: ['public']
                      enum:
                        - single-label
                        - multi-label
                      description: The type of classification performed
                      readOnly: true
                  required:
                    - id
                    - predictions
                    - confidences
                    - labels
                    - classification_type
                  readOnly: true
                readOnly: true
              meta:
                $ref: './types/ApiMeta.yaml'
                x-fern-audiences: ['public']
            required:
              - id
              - classifications
          examples:
            Example:
              value:
                id: ca245541-8841-456e-b306-293370789a30
                classifications:
                  - id: c50ab0d9-95d8-44de-ba90-9647a1718744
                    input: Confirm your email address
                    prediction: Not spam
                    predictions:
                      - Not spam
                    confidence: 0.7581943
                    confidences:
                      - 0.7581943
                    labels:
                      Not spam:
                        confidence: 0.7581943
                      Spam:
                        confidence: 0.24180566
                    classification_type: single-label
                  - id: 8a841de2-027f-49d4-8c91-e88fa1865b89
                    input: hey i need u to send some $
                    prediction: Spam
                    predictions:
                      - Spam
                    confidence: 0.9965721
                    confidences:
                      - 0.9965721
                    labels:
                      Not spam:
                        confidence: 0.0034279241
                      Spam:
                        confidence: 0.9965721
                    classification_type: single-label
                meta:
                  api_version:
                    version: '1'
      headers:
        X-API-Warning:
          schema:
            type: string
            x-fern-audiences: ['public']
          description: Warning description for incorrect usage of the API
  description: |-
    This endpoint makes a prediction about which label fits the specified text inputs best. To make a prediction, Classify uses the provided `examples` of text + label pairs as a reference.
    Note: [Fine-tuned models](/docs/classify-fine-tuning) trained on classification examples don't require the `examples` parameter to be passed in explicitly.
  requestBody:
    content:
      application/json:
        schema:
          type: object
          x-fern-audiences: ['public']
          x-examples:
            Example:
              inputs:
                - Confirm your email address
                - hey i need u to send some $
              examples:
                - text: Dermatologists don't like her!
                  label: Spam
                - text: 'Hello, open to this?'
                  label: Spam
                - text: I need help please wire me $1000 right now
                  label: Spam
                - text: Nice to know you ;)
                  label: Spam
                - text: Please help me?
                  label: Spam
                - text: Your parcel will be delivered today
                  label: Not spam
                - text: Review changes to our Terms and Conditions
                  label: Not spam
                - text: Weekly sync notes
                  label: Not spam
                - text: 'Re: Follow up from today’s meeting'
                  label: Not spam
                - text: Pre-read for tomorrow
                  label: Not spam
          properties:
            inputs:
              type: array
              x-fern-audiences: ['public']
              maxItems: 96
              description: 'A list of up to 96 texts to be classified. Each one must be a non-empty string.

              There is, however, no consistent, universal limit to the length a particular input can be. We perform classification on the first `x` tokens of each input, and `x` varies depending on which underlying model is powering classification. The maximum token length for each model is listed in the "max tokens" column [here](/docs/models).
              
              Note: by default the `truncate` parameter is set to `END`, so tokens exceeding the limit will be automatically dropped. This behavior can be disabled by setting `truncate` to `NONE`, which will result in validation errors for longer texts.'
              items:
                type: string
                x-fern-audiences: ['public']
                writeOnly: true
              writeOnly: true
            examples:
              type: array
              x-fern-audiences: ['public']
              description: |-
                An array of examples to provide context to the model. Each example is a text string and its associated label/class. Each unique label requires at least 2 examples associated with it; the maximum number of examples is 2500, and each example has a maximum length of 512 tokens. The values should be structured as `{text: "...",label: "..."}`.
                Note: [Fine-tuned Models](/docs/classify-fine-tuning) trained on classification examples don't require the `examples` parameter to be passed in explicitly.
              maxItems: 2500
              items:
                x-fern-audiences: ['public']
                $ref: './types/ClassifyExample.yaml'
              writeOnly: true
            model:
              type: string
              x-fern-audiences: ['public']
              description: 'The identifier of the model. Currently available models are
                `embed-multilingual-v2.0`, `embed-english-light-v2.0`, and
                `embed-english-v2.0` (default). Smaller "light" models are
                faster, while larger models will perform better. [Fine-tuned
                models](/docs/fine-tuning) can also be
                supplied with their full ID.'
              writeOnly: true
            preset:
              type: string
              x-fern-audiences: ['public']
              example: my-preset-a58sbd
              description: "The ID of a custom playground preset. You can create presets in
                the
                [playground](https://dashboard.cohere.com/playground/classify?mo\
                del=large). If you use a preset, all other parameters become
                optional, and any included parameters will override the preset's
                parameters."
              writeOnly: true
            truncate:
              type: string
              x-fern-audiences: ['public']
              default: END
              enum:
                - NONE
                - START
                - END
              description: |-
                One of `NONE|START|END` to specify how the API will handle inputs longer than the maximum token length.
                Passing `START` will discard the start of the input. `END` will discard the end of the input. In both cases, input is discarded until the remaining input is exactly the maximum input token length for the model.
                If `NONE` is selected, when the input exceeds the maximum input token length an error will be returned.
              writeOnly: true
          required:
            - inputs
        examples:
          Example:
            value:
              inputs:
                - Confirm your email address
                - hey i need u to send some $
              examples:
                - text: Dermatologists don't like her!
                  label: Spam
                - text: 'Hello, open to this?'
                  label: Spam
                - text: I need help please wire me $1000 right now
                  label: Spam
                - text: Nice to know you ;)
                  label: Spam
                - text: Please help me?
                  label: Spam
                - text: Your parcel will be delivered today
                  label: Not spam
                - text: Review changes to our Terms and Conditions
                  label: Not spam
                - text: Weekly sync notes
                  label: Not spam
                - text: 'Re: Follow up from today’s meeting'
                  label: Not spam
                - text: Pre-read for tomorrow
                  label: Not spam
    description: ''
